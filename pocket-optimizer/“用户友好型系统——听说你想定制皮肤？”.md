ğŸ§© æ‰©å±•ï¼šå°†äº¤äº’ç•Œé¢ä¸å¯¼å‡ºåŠŸèƒ½ä¹Ÿç»„ä»¶åŒ–

æ‚¨è¯´å¾—å®Œå…¨æ­£ç¡®â€”â€”æ•´ä¸ªç³»ç»Ÿçš„æ¯ä¸€ä¸ªå¯æ›¿æ¢æ¨¡å—éƒ½åº”è¯¥ç»„ä»¶åŒ–ã€‚
è¿™ä¸ä»…åŒ…æ‹¬ç®—æ³•å’Œæµ‹é‡æºï¼Œè¿˜åŒ…æ‹¬ç”¨æˆ·äº¤äº’ç•Œé¢ã€ç»“æœå¯¼å‡ºå™¨ã€æ•°æ®å¯è§†åŒ–å™¨ã€æ—¥å¿—è®°å½•å™¨ç­‰ã€‚

è¿™æ ·æ‚¨çš„ç³»ç»Ÿå°†ä»â€œä¼˜åŒ–å¼•æ“â€å‡çº§ä¸ºå®Œæ•´ã€å¯æ’æ‹”ã€å·¥ä¸šçº§çš„å®éªŒå¹³å°ã€‚æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹æ³¨å†Œã€ç‹¬ç«‹æ›¿æ¢ï¼Œè€Œä¸»ç¨‹åºåªéœ€å‡ è¡Œä»£ç å°±èƒ½ç»„è£…å‡ºå®Œæ•´åº”ç”¨ã€‚

---

ğŸ¯ ç›®æ ‡æ¶æ„ï¼ˆç»„ä»¶åŒ–å…¨æ™¯ï¼‰

```
industrial_optimizer/
â”œâ”€â”€ sources/                 # æµ‹é‡æºç»„ä»¶
â”‚   â”œâ”€â”€ test_cli.py
â”‚   â””â”€â”€ real_user.py
â”œâ”€â”€ algorithms/              # ç®—æ³•ç»„ä»¶
â”‚   â”œâ”€â”€ genetic.py
â”‚   â”œâ”€â”€ powell.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ exporters/              # ğŸ“ å¯¼å‡ºå™¨ç»„ä»¶ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ csv_exporter.py
â”‚   â”œâ”€â”€ json_exporter.py
â”‚   â””â”€â”€ excel_exporter.py
â”œâ”€â”€ uis/                    # ğŸ–¥ï¸ äº¤äº’ç•Œé¢ç»„ä»¶ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ cli_menu.py        # å‘½ä»¤è¡Œèœå•
â”‚   â””â”€â”€ gui_app.py         # å›¾å½¢ç•Œé¢ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ registry.py            # æ³¨å†Œä¸­å¿ƒï¼ˆå·²æ”¯æŒä»»æ„ç±»å‹ï¼‰
â”œâ”€â”€ orchestrator.py        # åè°ƒå™¨ï¼ˆä¼˜åŒ–ä¸“ç”¨ï¼‰
â””â”€â”€ main.py               # å…¥å£ï¼šç»„è£…ç»„ä»¶ï¼Œå¯åŠ¨ UI
```

---

ğŸ“ 1. å¯¼å‡ºå™¨ç»„ä»¶ï¼ˆExporterï¼‰

1.1 å®šä¹‰ç»„ä»¶å¥‘çº¦

æ‰€æœ‰å¯¼å‡ºå™¨éƒ½åº”å®ç°ç»Ÿä¸€æ¥å£ï¼Œæ–¹ä¾¿åè°ƒå™¨æˆ– UI ç»Ÿä¸€è°ƒç”¨ã€‚

æ¨èç­¾åï¼š

```python
def export(history: List[HistoryEntry], filepath: str, **options) -> str
```

Â· è¾“å…¥ï¼šä¼˜åŒ–å†å²è®°å½•åˆ—è¡¨ã€è¾“å‡ºè·¯å¾„ã€å¯é€‰æ ¼å¼å‚æ•°
Â· è¾“å‡ºï¼šæˆåŠŸä¿å­˜çš„æ–‡ä»¶è·¯å¾„ï¼ˆæˆ–é”™è¯¯ä¿¡æ¯ï¼‰

1.2 å¯¼å‡ºå™¨æ¨¡æ¿

```python
# exporters/csv_exporter.py
from typing import List
from registry import registry
from orchestrator import HistoryEntry

@registry.register(
    name='exporter.csv',
    type_='exporter',
    signature='export(history: List[HistoryEntry], filepath: str) -> str'
)
class CSVExporter:
    def export(self, history: List[HistoryEntry], filepath: str) -> str:
        import csv
        with open(filepath, 'w', newline='') as f:
            writer = csv.writer(f)
            writer.writerow(['timestamp', 'algorithm', 'point', 'value'])
            for entry in history:
                writer.writerow([
                    entry.timestamp,
                    entry.algorithm,
                    entry.point.tolist(),
                    entry.value
                ])
        return filepath
```

ç±»ä¼¼åœ°åˆ›å»º json_exporter.pyã€excel_exporter.pyï¼ˆéœ€å®‰è£… openpyxlï¼‰ã€‚

---

ğŸ–¥ï¸ 2. äº¤äº’ç•Œé¢ç»„ä»¶ï¼ˆUIï¼‰

2.1 è®¾è®¡æ€è·¯

å°†äº¤äº’é€»è¾‘å°è£…ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œä¸ç›´æ¥è°ƒç”¨ç®—æ³•ï¼Œè€Œæ˜¯ï¼š

1. é€šè¿‡æ³¨å†Œè¡¨è·å–å¯ç”¨ç»„ä»¶åˆ—è¡¨ï¼ˆæºã€ç®—æ³•ã€å¯¼å‡ºå™¨ï¼‰ã€‚
2. è®©ç”¨æˆ·é€‰æ‹©ï¼Œç„¶åè°ƒç”¨åè°ƒå™¨æ‰§è¡Œä¼˜åŒ–ã€‚
3. è°ƒç”¨å¯¼å‡ºå™¨ä¿å­˜ç»“æœã€‚

è¿™æ · UI ç»„ä»¶ä¸æ ¸å¿ƒä¼˜åŒ–å½»åº•è§£è€¦ï¼Œæ›´æ¢ç•Œé¢é£æ ¼ä¸å½±å“ä¸šåŠ¡é€»è¾‘ã€‚

2.2 UI ç»„ä»¶æ¨¡æ¿ï¼ˆå‘½ä»¤è¡Œèœå•ï¼‰

```python
# uis/cli_menu.py
from registry import registry
from orchestrator import Orchestrator, OptimizationConfig

@registry.register(
    name='ui.cli_menu',
    type_='ui',
    signature='run()'
)
class CommandLineMenu:
    def run(self):
        print("=== ä¼˜åŒ–ç³»ç»Ÿ CLI èœå• ===")
        
        # 1. é€‰æ‹©æµ‹é‡æº
        sources = registry.list_components('source')
        for i, s in enumerate(sources):
            print(f"{i}. {s.name}")
        src_idx = int(input("é€‰æ‹©æµ‹é‡æº: "))
        source_name = sources[src_idx].name
        
        # 2. é…ç½®ä¼˜åŒ–é—®é¢˜
        dims = int(input("ç»´åº¦: "))
        bounds = []
        for i in range(dims):
            low = float(input(f"å‚æ•°{i+1}ä¸‹é™: "))
            high = float(input(f"å‚æ•°{i+1}ä¸Šé™: "))
            bounds.append((low, high))
        
        config = OptimizationConfig(
            param_bounds=bounds,
            param_names=[f"x{i}" for i in range(dims)]
        )
        
        # 3. é€‰æ‹©ç®—æ³•
        algos = registry.list_components('algorithm')
        for i, a in enumerate(algos):
            print(f"{i}. {a.name}")
        algo_idx = int(input("é€‰æ‹©ç®—æ³•: "))
        algo_name = algos[algo_idx].name
        
        # 4. æ‰§è¡Œä¼˜åŒ–
        orch = Orchestrator(config, source_name=source_name)
        best, val = orch.run(algo_name)
        print(f"\næœ€ä¼˜è§£: {best}")
        print(f"æœ€ä¼˜å€¼: {val}")
        
        # 5. é€‰æ‹©å¯¼å‡ºæ ¼å¼
        exporters = registry.list_components('exporter')
        if exporters:
            print("\nå¯¼å‡ºç»“æœ:")
            for i, e in enumerate(exporters):
                print(f"{i}. {e.name}")
            exp_idx = int(input("é€‰æ‹©å¯¼å‡ºæ ¼å¼: "))
            exp_name = exporters[exp_idx].name
            exp_class = registry.get_component(exp_name)
            exporter = exp_class()
            filepath = f"result.{exp_name.split('.')[1]}"  # ç®€åŒ–
            exporter.export(orch.get_history(), filepath)
            print(f"å·²ä¿å­˜è‡³ {filepath}")
```

---
ğŸš€ 4. æ–°çš„ä¸»ç¨‹åºï¼šåªéœ€ä¸€è¡Œ

```python
# main.py
import uis.cli_menu
import exporters.csv_exporter
import exporters.json_exporter
# ... å¯¼å…¥æ‰€æœ‰éœ€è¦çš„ç»„ä»¶

from registry import registry

# è·å– UI ç»„ä»¶å¹¶è¿è¡Œ
ui_cls = registry.get_component('ui.cli_menu')
ui = ui_cls()
ui.run()
```

ç³»ç»Ÿå¯åŠ¨æµç¨‹ï¼š

1. å¯¼å…¥æ‰€æœ‰ç»„ä»¶æ¨¡å— â†’ è‡ªåŠ¨æ³¨å†Œåˆ° registry
2. ä»æ³¨å†Œè¡¨è·å– UI ç»„ä»¶
3. UI ç»„ä»¶å†…éƒ¨ä½¿ç”¨æ³¨å†Œè¡¨åˆ—å‡ºå¯ç”¨æº/ç®—æ³•/å¯¼å‡ºå™¨
4. ç”¨æˆ·äº¤äº’ â†’ è°ƒç”¨åè°ƒå™¨ â†’ æ‰§è¡Œä¼˜åŒ– â†’ è°ƒç”¨å¯¼å‡ºå™¨

---

ğŸ“¦ 5. å·¥ä¸šåŒ–è¿ç§»æ­¥éª¤ï¼ˆé’ˆå¯¹æ‚¨çš„æ—§ç³»ç»Ÿï¼‰

5.1 åˆ†è§£æ—§ç³»ç»Ÿçš„äº¤äº’ç•Œé¢

Â· æ—§ main() æˆ– Bridge ä¸­çš„äººæœºäº¤äº’é€»è¾‘ â†’ æå–ä¸º uis/old_cli.pyï¼Œæ”¹é€ æˆ UI ç»„ä»¶ã€‚
Â· æ—§çš„ç»“æœä¿å­˜å‡½æ•°ï¼ˆå¦‚ save_csvã€save_jsonï¼‰â†’ åˆ†åˆ«æå–ä¸º exporters/csv_exporter.py ç­‰ã€‚

5.2 ä¿ç•™åŸæœ‰äº¤äº’ä½“éªŒ

æ‚¨è¯´â€œåŸæœ‰çš„äº¤äº’ç•Œé¢ä¹Ÿæ˜¯éå¸¸å¥½â€ï¼Œå®Œå…¨å¯ä»¥åœ¨æ–°æ¶æ„ä¸­ä¿ç•™ã€‚åªéœ€å°†åŸæœ‰äº¤äº’ä»£ç åŸå°ä¸åŠ¨åœ°ç§»å…¥ UI ç»„ä»¶çš„ run() æ–¹æ³•ï¼Œä»…ä¿®æ”¹è°ƒç”¨ä¼˜åŒ–çš„éƒ¨åˆ†ï¼ˆæ”¹ä¸ºä½¿ç”¨ Orchestratorï¼‰ã€‚

ä¾‹å¦‚æ—§ä»£ç ï¼š

```python
def main():
    source = RealUserSource()
    algo = GeneticAlgorithm()
    bounds = get_bounds_from_user()
    result = algo.optimize(bounds, source)   # å‡è®¾ç®—æ³•æ”¯æŒä¼ å…¥source
    save_csv(result)
```

æ”¹é€ åï¼š

```python
@registry.register(name='ui.legacy_cli', type_='ui', ...)
class LegacyCLI:
    def run(self):
        # ... å®Œå…¨ä¿ç•™åŸæœ‰çš„ç”¨æˆ·äº¤äº’ä»£ç  ...
        source_name = 'source.real_user'
        config = OptimizationConfig(bounds, ...)
        orch = Orchestrator(config, source_name)
        best, val = orch.run('algorithm.genetic')
        # è°ƒç”¨å¯¼å‡ºå™¨ç»„ä»¶
        exporter = registry.get_component('exporter.csv')()
        exporter.export(orch.get_history(), 'result.csv')
```

æ— éœ€é‡å†™äº¤äº’ç•Œé¢ï¼Œåªéœ€æ³¨å…¥ä¾èµ–ï¼

---

âœ… å·¥ä¸šåŒ–ç»„ä»¶åŒ–åŸåˆ™ï¼ˆè¡¥å……ï¼‰

ç»„ä»¶ç±»å‹ å‘½åè§„èŒƒ æ ¸å¿ƒå¥‘çº¦ æ³¨å†Œç¤ºä¾‹
æµ‹é‡æº source.xxx measure(point, n_samples) @registry.register(name='source.real_user', type_='source')
ç®—æ³• algorithm.xxx optimize(bounds) @registry.register(name='algorithm.genetic', type_='algorithm')
å¯¼å‡ºå™¨ exporter.xxx export(history, filepath) @registry.register(name='exporter.csv', type_='exporter')
ç•Œé¢ ui.xxx run() @registry.register(name='ui.cli', type_='ui')
å¯è§†åŒ–å™¨ visualizer.xxx plot(history) å¯æ‰©å±•
æ•°æ®é¢„å¤„ç† processor.xxx process(data) å¯æ‰©å±•

æ‰€æœ‰ç»„ä»¶å¹³ç­‰åœ°ä½ï¼Œæ³¨å†Œä¸­å¿ƒä¸€è§†åŒä»ã€‚

---

ğŸ§ª 7. æµ‹è¯•ä¸éªŒè¯

```bash
# 1. å¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼Œæ£€æŸ¥æ³¨å†Œè¡¨
python3 -c "import uis.cli_menu, exporters.csv_exporter, sources.real_user, algorithms.genetic; from registry import registry; print([s.name for s in registry.list_components()])"

# 2. è¿è¡Œäº¤äº’ç•Œé¢
python3 -c "import uis.cli_menu; from registry import registry; registry.get_component('ui.cli_menu')().run()"
```

---

ğŸ“ æ€»ç»“

æ‚¨å·²ç»å‘ç°äº†ç»„ä»¶åŒ–ç³»ç»Ÿçš„çœŸæ­£å¨åŠ›ï¼šä¸åªæ˜¯ç®—æ³•å’Œæºï¼Œè€Œæ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ¯ä¸€å—ç§¯æœ¨éƒ½å¯ä»¥ç‹¬ç«‹æ³¨å†Œã€åŠ¨æ€ç»„è£…ã€‚

Â· äº¤äº’ç•Œé¢ â†’ ä¸€ä¸ª UI ç»„ä»¶
Â· CSV å¯¼å‡º â†’ ä¸€ä¸ª Exporter ç»„ä»¶
Â· JSON å¯¼å‡º â†’ å¦ä¸€ä¸ª Exporter ç»„ä»¶
Â· Excel å¯¼å‡º â†’ å†ä¸€ä¸ª Exporter ç»„ä»¶
Â· æœªæ¥ GUI â†’ å¦ä¸€ä¸ª UI ç»„ä»¶ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä¸šåŠ¡ä»£ç 

è¿™å°±æ˜¯å·¥ä¸šåŒ–æ¶æ„çš„æ ¸å¿ƒï¼šå¯æ’æ‹”ã€å¯å¤ç”¨ã€å¯æµ‹è¯•ã€å¯ç»´æŠ¤ã€‚

ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨ä¿ç•™åŸæœ‰ä¼˜ç§€äº¤äº’ç•Œé¢çš„åŒæ—¶ï¼Œå°†å®ƒå˜æˆä¸€ä¸ªæ³¨å†Œåœ¨ç³»ç»Ÿä¸­çš„æ™®é€šç»„ä»¶ã€‚æ•´ä¸ªç³»ç»Ÿä»æ­¤ä¸å†æ˜¯â€œç¨€çƒ‚ç»“æ„â€ï¼Œè€Œæ˜¯æ¸…æ™°ã€å¯æ‰©å±•ã€ç”Ÿäº§å°±ç»ªçš„ç»„ä»¶åŒ–å¹³å°ã€‚

æ¥ä¸‹æ¥ï¼Œæ‚¨åªéœ€æŒ‰æ­¤æ¨¡å¼é€æ­¥å°†æ—§æ¨¡å—å°è£…æˆç»„ä»¶ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨è¿›åŒ–ã€‚ğŸ¯


ğŸ¨ å·¥ä¸šçº§ç»„ä»¶åŒ–æ¶æ„ï¼šæ”¯æŒå¤šçš®è‚¤/å¤šäº¤äº’å™¨

æ‚¨æå‡ºçš„è‡ªå®šä¹‰äº¤äº’ç•Œé¢çš®è‚¤ï¼Œæ­£æ˜¯ç»„ä»¶åŒ–æ€æƒ³çš„ç»ˆæä½“ç°â€”â€”æ¯ä¸€ä¸ªäº¤äº’å™¨éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€å¯æ³¨å†Œã€å¯æ›¿æ¢çš„ç»„ä»¶ã€‚ä¸åŒçš„äººå¯ä»¥ï¼š

Â· ç”¨å‘½ä»¤è¡Œèœå•ï¼ˆç»å…¸ï¼‰
Â· ç”¨ç®€æ´å‘½ä»¤æ¨¡å¼ï¼ˆå¿«é€Ÿå‚æ•°è¾“å…¥ï¼‰
Â· ç”¨Web ä»ªè¡¨ç›˜ï¼ˆå›¢é˜Ÿå…±äº«ï¼‰
Â· ç”¨GUI æ¡Œé¢åº”ç”¨ï¼ˆéæŠ€æœ¯ç”¨æˆ·ï¼‰
Â· ç”šè‡³ç”¨è¯­éŸ³äº¤äº’ï¼ˆæå®¢é£ï¼‰

æ‰€æœ‰çš®è‚¤å…±äº«åŒä¸€å¥—åç«¯ï¼ˆç®—æ³•ã€æµ‹é‡æºã€å¯¼å‡ºå™¨ï¼‰ï¼Œåªéœ€åˆ‡æ¢ UI ç»„ä»¶ï¼Œæ— éœ€æ”¹åŠ¨ä»»ä½•ä¸šåŠ¡ä»£ç ã€‚

---

ğŸ§± æ¶æ„å‡çº§ï¼šUI ç»„ä»¶ = äº¤äº’å™¨ + çš®è‚¤

æˆ‘ä»¬å°† UI ç»„ä»¶å®šä¹‰ä¸ºä¸€ä¸ªå®Œæ•´çš„äº¤äº’ç¨‹åºå…¥å£ï¼Œå®ƒï¼š

1. é€šè¿‡æ³¨å†Œè¡¨å‘ç°å¯ç”¨çš„æºã€ç®—æ³•ã€å¯¼å‡ºå™¨ç­‰ã€‚
2. é€šè¿‡åè°ƒå™¨æ‰§è¡Œä¼˜åŒ–ä»»åŠ¡ã€‚
3. è°ƒç”¨å¯¼å‡ºå™¨ä¿å­˜ç»“æœã€‚
4. å‘ˆç°é£æ ¼å®Œå…¨è‡ªç”±â€”â€”CLIã€GUIã€Webã€TUI å‡å¯ã€‚

æ¯ä¸ª UI ç»„ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„â€œçš®è‚¤â€ï¼Œä¸»ç¨‹åºåªéœ€æ ¹æ®ç”¨æˆ·é€‰æ‹©åŠ è½½å¯¹åº”çš„ UI ç»„ä»¶å³å¯ã€‚

---

ğŸ“¦ å®ç°æ–¹æ¡ˆ

1. å®šä¹‰ UI ç»„ä»¶ç»Ÿä¸€å¥‘çº¦

```python
# æ‰€æœ‰ UI ç»„ä»¶å¿…é¡»å®ç° run() æ–¹æ³•ï¼Œæ— å‚æ•°
@registry.register(name='ui.xxx', type_='ui', signature='run()')
class SomeUI:
    def run(self):
        # 1. äº¤äº’ï¼ˆé£æ ¼è‡ªå®šä¹‰ï¼‰
        # 2. è°ƒç”¨ orchestrator
        # 3. è°ƒç”¨ exporter
        pass
```

2. å®ç°å¤šä¸ªçš®è‚¤

ğŸ–¥ï¸ çš®è‚¤ Aï¼šç»å…¸å±‚çº§èœå•ï¼ˆç°æœ‰ï¼‰

```python
@registry.register(name='ui.cli_menu', type_='ui')
class ClassicCLI:
    def run(self):
        print("=== ç»å…¸èœå• ===")
        # æ˜¾ç¤ºæ‰€æœ‰æºã€ç®—æ³•ã€å¯¼å‡ºå™¨ä¾›é€‰æ‹©...
```

ğŸš€ çš®è‚¤ Bï¼šæç®€å•è¡Œå‘½ä»¤

```python
@registry.register(name='ui.cli_quick', type_='ui')
class QuickCLI:
    def run(self):
        # ç›´æ¥ä½¿ç”¨é»˜è®¤æºå’Œç®—æ³•ï¼Œåªé—®ç»´åº¦
        dims = int(input("ç»´åº¦: "))
        bounds = [(float(input(f"ä¸‹é™{i}")), float(input(f"ä¸Šé™{i}"))) for i in range(dims)]
        config = OptimizationConfig(bounds, [f"x{i}" for i in range(dims)])
        orch = Orchestrator(config, source_name='source.real_user')
        best, val = orch.run('algorithm.genetic')
        print(f"{best} â†’ {val}")
```

ğŸŒ çš®è‚¤ Cï¼šç®€æ˜“ Web ç•Œé¢ï¼ˆä½¿ç”¨ Flaskï¼‰

```python
@registry.register(name='ui.web_demo', type_='ui')
class WebUI:
    def run(self):
        from flask import Flask, request, jsonify
        app = Flask(__name__)
        
        @app.route('/optimize', methods=['POST'])
        def optimize():
            data = request.json
            config = OptimizationConfig(data['bounds'], data['names'])
            orch = Orchestrator(config, source_name='source.real_user')
            best, val = orch.run('algorithm.genetic')
            return jsonify({'best': best.tolist(), 'value': val})
        
        app.run(host='0.0.0.0', port=5000)
```

ğŸ–±ï¸ çš®è‚¤ Dï¼šTUIï¼ˆæ–‡æœ¬å›¾å½¢ç•Œé¢ï¼‰

```python
@registry.register(name='ui.tui', type_='ui')
class TUI:
    def run(self):
        import curses
        # å®ç° curses ç•Œé¢...
```

---

ğŸ® ä¸»ç¨‹åºï¼šåŠ¨æ€é€‰æ‹©çš®è‚¤

```python
# main.py
import sys
import uis.cli_menu      # çš®è‚¤ A
import uis.cli_quick     # çš®è‚¤ B
import uis.web_demo      # çš®è‚¤ C
# ... æ‰€æœ‰çš®è‚¤

from registry import registry

def main():
    # é€šè¿‡å‘½ä»¤è¡Œå‚æ•°é€‰æ‹©çš®è‚¤
    skin = sys.argv[1] if len(sys.argv) > 1 else 'ui.cli_menu'
    
    ui_cls = registry.get_component(skin)
    if not ui_cls:
        print(f"çš®è‚¤ {skin} ä¸å­˜åœ¨ï¼Œå¯é€‰ï¼š")
        for ui in registry.list_components('ui'):
            print(f"  - {ui.name}")
        return
    
    ui = ui_cls()
    ui.run()

if __name__ == '__main__':
    main()
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```bash
python3 main.py ui.cli_menu      # ç»å…¸èœå•
python3 main.py ui.cli_quick     # å¿«é€Ÿæ¨¡å¼
python3 main.py ui.web_demo      # Web ç•Œé¢
```

---

ğŸ§© æ›´è¿›ä¸€æ­¥ï¼šçš®è‚¤å‚æ•°åŒ–

æŸäº›çš®è‚¤å¯èƒ½éœ€è¦é¢å¤–é…ç½®ï¼ˆå¦‚ Web ç•Œé¢çš„ç«¯å£ã€TUI çš„é¢œè‰²ä¸»é¢˜ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ï¼š

æ–¹å¼1ï¼šé€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶

```python
class WebUI:
    def run(self):
        port = os.environ.get('UI_PORT', 5000)
        app.run(port=port)
```

æ–¹å¼2ï¼šå…è®¸ UI ç»„ä»¶æ¥æ”¶å‚æ•°

ä¿®æ”¹å¥‘çº¦ï¼Œrun(**kwargs) æˆ–é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ï¼š

```python
@registry.register(name='ui.web', type_='ui')
class WebUI:
    def __init__(self, port=5000):
        self.port = port
    def run(self):
        app.run(port=self.port)
```

ä¸»ç¨‹åºï¼š

```python
ui_cls = registry.get_component('ui.web')
ui = ui_cls(port=8080)   # åŠ¨æ€æŒ‡å®šç«¯å£
ui.run()
```

---

ğŸ“‹ çš®è‚¤æ³¨å†Œä¸å‘ç°

é€šè¿‡ registry.list_components('ui') å¯è·å–æ‰€æœ‰å·²æ³¨å†Œçš„ UI ç»„ä»¶ï¼Œè½»æ¾å®ç°çš®è‚¤æµè§ˆå™¨ï¼š

```python
def list_skins():
    print("å¯ç”¨çš®è‚¤ï¼š")
    for i, skin in enumerate(registry.list_components('ui')):
        print(f"{i}. {skin.name} - {skin.source_file}")
```

ç”šè‡³å¯ä»¥åšä¸€ä¸ªçš®è‚¤é€‰æ‹©å™¨çš®è‚¤ï¼ˆå¥—å¨ƒå¼€å§‹ ğŸ˜„ï¼‰ã€‚

---

ğŸ­ å·¥ä¸šåŒ–ä¼˜åŠ¿æ€»ç»“

ç‰¹æ€§ ä¼ ç»Ÿæ¶æ„ ç»„ä»¶åŒ–çš®è‚¤æ¶æ„
æ–°å¢äº¤äº’æ–¹å¼ é‡å†™ mainï¼Œè€¦åˆä¸šåŠ¡ æ–°å¢ä¸€ä¸ª UI ç»„ä»¶ï¼Œ0 ä¸šåŠ¡æ”¹åŠ¨
å¤šäººä¸åŒåå¥½ ä¸å¯èƒ½ æ¯äººå¯åŠ¨æ—¶æŒ‡å®šä¸åŒçš®è‚¤
å›¢é˜Ÿå…±äº« Web ç•Œé¢ å•ç‹¬ç»´æŠ¤ä¸€ä¸ªæœåŠ¡ ä½œä¸º UI ç»„ä»¶æ³¨å†Œï¼Œä¸€é”®å¯åŠ¨
å¿«é€ŸåŸå‹ å†™ä¸´æ—¶è„šæœ¬ å†™ä¸€ä¸ªæç®€ UI ç»„ä»¶ï¼Œæ³¨å†Œå³å¯ç”¨
æµ‹è¯• æ‰‹åŠ¨ç‚¹å‡» å¯ä¸ºæ¯ä¸ª UI ç»„ä»¶ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•

æ‚¨çš„ç³»ç»Ÿä¸å†åªæ˜¯ä¸€ä¸ªä¼˜åŒ–å¼•æ“ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç”Ÿé•¿çš„äº¤äº’å¹³å°ã€‚

---

ğŸš€ æ‚¨çš„ä¸‹ä¸€æ­¥

1. å°†ç°æœ‰çš„ä¼˜ç§€äº¤äº’ç•Œé¢å°è£…ä¸ºä¸€ä¸ª UI ç»„ä»¶ï¼ˆå¦‚ ui.legacyï¼‰ï¼Œä¿ç•™åŸæ±åŸå‘³ã€‚
2. æŒ‰éœ€å¼€å‘å…¶ä»–çš®è‚¤ï¼ˆæç®€ç‰ˆã€Webç‰ˆã€TUIç‰ˆï¼‰ï¼Œæ¯ä¸ªçš®è‚¤ç‹¬ç«‹æ³¨å†Œã€‚
3. ä¿®æ”¹ä¸»ç¨‹åºä¸ºçš®è‚¤åŠ è½½å™¨ï¼Œé€šè¿‡å‘½ä»¤è¡Œæˆ–é…ç½®æ–‡ä»¶é€‰æ‹©çš®è‚¤ã€‚
4. äº«å—æˆæœï¼šå›¢é˜Ÿæˆå‘˜å„è‡ªä½¿ç”¨è‡ªå·±å–œæ¬¢çš„ç•Œé¢ï¼Œå…±äº«åŒä¸€å¥—ç®—æ³•åº“å’Œæµ‹é‡æºã€‚

---

è¿™å°±æ˜¯å·¥ä¸šåŒ–æ¶æ„çš„ç»ˆæå½¢æ€ï¼šæ¯ä¸€å—ç§¯æœ¨éƒ½å¯æ’æ‹”ï¼Œæ¯ä¸€æ¬¡äº¤äº’éƒ½å¯å®šåˆ¶ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·éƒ½å¯è‡ªä¸»é€‰æ‹©ã€‚ ğŸ®ğŸ§©ğŸ¨
